{% load static %}
{% load book_filters %}
<div class="columns is-multiline">
{% for book in offered_books %}
  <div class="column is-half-mobile is-one-third-tablet is-one-quarter-desktop is-one-fifth-widescreen">
    <div class="card">
      <div class="card-content">
        <div class="book-cover-container mb-3 has-text-centered">
          {% if book.cover_image %}
          <img src="{{ book.cover_image.url }}" alt="{{ book.title }}" class="book-cover-image">
          {% else %}
          <div class="book-placeholder" style="width: 100%; height: 100%;"></div>
          {% endif %}
        </div>
        <p class="is-size-6 mb-1">
          <strong>{{ book.title }}</strong>
        </p>
        <p class="is-size-6 mb-2">
          <a href="{% url 'home' %}?search={{ book.author|urlencode }}" class="has-text-grey-dark" title="Buscar libros de este autor">{{ book.author }}</a>
        </p>
        <div class="is-size-7 mb-2">
          <div class="mb-2">
            <span class="has-text-grey timeago-tooltip mr-2" data-timestamp="{{ book.last_activity_date|date:'c' }}">
              <span class="icon is-small">
                <i class="fas fa-clock"></i>
              </span>
              <span>{{ book.last_activity_date|timeago }}</span>
            </span>
            <a href="{% url 'profile' username=book.user.username %}" class="has-text-grey-dark" title="Ver el perfil de {{ book.user.username }}">
              <span class="icon is-small">
                <i class="fas fa-user"></i>
              </span>
              <span>{{ book.user.username }}</span>
            </a>
            {% if book.notes %}
            <span class="has-text-grey ml-2" style="cursor: pointer; text-decoration: none;" title="{{ book.notes }}">[observaciones]</span>
            {% endif %}
          </div>
        </div>
        <div style="margin-top: auto;">
          {% if book.user != request.user %}
          {% include '_exchange_button.html' with button_classes='is-fullwidth' %}
          {% endif %}
        </div>
      </div>
    </div>
  </div>
{% empty %}
  <div class="column">
    <div class="notification is-info is-light">
      <p>No hay libros disponibles en este momento.</p>
    </div>
  </div>
{% endfor %}
</div>
